<section>
    <div class="section-header">
        Sent Notification
        <button class="btn blue-bg white-text ml-auto roboto-regular-14 py-1 position-absolute"
                style="right: 0; top: -3px;"
                (click)="onAddNotification()">
            + New Notifications
        </button>
    </div>
    <div class="section-content">
        <ngb-accordion #savedList="ngbAccordion">
            <ngb-panel *ngFor="let notification of sentNotifications; let panelId = index;"
                       [title]="notification.email_subject"
                       [id]="'sentPanelId-' + panelId">
                <ng-template ngbPanelHeader>
                    <div class="panel-header" (click)="savedList.toggle('sentPanelId-' + panelId)">
                        <span> {{ notification.email_subject }}</span>
                        <span class="fa" [ngClass]="{'fa-angle-down': !opened, 'fa-angle-right': opened}"></span>
                    </div>
                </ng-template>
                <ng-template ngbPanelContent>
                    <notification-content [notification]="notification"
                                          (remove)="onDelete(confirmDialog, notification.id, 'complete', savedList)"
                                          (edit)="onEdit(notification.id)">
                    </notification-content>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>
    </div>
</section>

<section>
    <div class="section-header d-flex">
        Pending Notification
    </div>
    <div class="section-content">
        <ngb-accordion #recentList="ngbAccordion">
            <ngb-panel *ngFor="let notification of pendingNotifications; let panelId = index;"
                       [title]="notification.email_subject"
                       [id]="'pendingPanelId-' + panelId">
                <ng-template ngbPanelHeader let-opened="opened">
                    <div class="panel-header" (click)="recentList.toggle('pendingPanelId-' + panelId)">
                        <span> {{ notification.email_subject }}</span>
                        <span class="fa" [ngClass]="{'fa-angle-down': !opened, 'fa-angle-right': opened}"></span>
                    </div>
                </ng-template>
                <ng-template ngbPanelContent>
                    <notification-content [notification]="notification"
                                          (remove)="onDelete(confirmDialog, notification.id, 'pending', recentList)"
                                          (edit)="onEdit(notification.id)">
                    </notification-content>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>
    </div>
</section>

<ng-template #confirmDialog let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-title">Please confirm</h4>
        <button type="button" class="close" aria-describedby="modal-title" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <p><strong>Are you sure you want to delete this notification?</strong></p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" (click)="modal.dismiss('cancel click')">Cancel</button>
        <button type="button" class="btn btn-primary" (click)="modal.close('Ok click')">Ok</button>
    </div>
</ng-template>
